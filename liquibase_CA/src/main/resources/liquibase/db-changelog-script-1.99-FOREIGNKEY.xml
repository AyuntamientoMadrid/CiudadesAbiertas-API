<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

<!-- No incluimos user, territorio y dsd que son maestras en la carga de fk -->

<!-- LOCAL COMERCIAL -->
	<changeSet author="Localidata" id="FK-agrupacion_comercial">
        <addForeignKeyConstraint 
			baseColumnNames="agrupacion_comercial" 
			baseTableName="local_comercial" 
			constraintName="fk_local_comercial_agrupacion" 
			referencedColumnNames="id" 
			referencedTableName="local_comercial_agrupacion"/>
    </changeSet>
    <changeSet author="Localidata" id="FK-tiene_terraza">
        <addForeignKeyConstraint 
			baseColumnNames="tiene_terraza" 
			baseTableName="local_comercial" 
			constraintName="fk_local_comercial_terraza" 
			referencedColumnNames="id" 
			referencedTableName="local_comercial_terraza"/>
    </changeSet>
    <changeSet author="Localidata" id="FK-tiene_licencia_apertura">
        <addForeignKeyConstraint 
			baseColumnNames="tiene_licencia_apertura" 
			baseTableName="local_comercial" 
			constraintName="fk_local_comercial_licencia"  
			referencedColumnNames="id" 
			referencedTableName="local_comercial_licencia"/>
    </changeSet>
	
	<!-- CALIDAD DEL AIRE -->
	<changeSet author="Localidata" id="FK-made-by-sensor-table-calidad-aire-observacion">
        <addForeignKeyConstraint baseColumnNames="made_by_sensor" baseTableName="calidad_aire_observacion" constraintName="fk_estacion"  referencedColumnNames="id" referencedTableName="calidad_aire_estacion"/>
    </changeSet>
	
	<changeSet author="Localidata" id="FK-made-by-sensor-table-calidad-aire-sensor">
        <addForeignKeyConstraint baseColumnNames="is_hosted_by" baseTableName="calidad_aire_sensor" constraintName="fk_estacion_sensor"  referencedColumnNames="id" referencedTableName="calidad_aire_estacion"/>
    </changeSet>
	
	
	<!-- Organigrama -->
	<changeSet author="Localidata" id="FK-UNIDAD-RAIZ">
        <addForeignKeyConstraint baseColumnNames="unidad_raiz" baseTableName="organigrama" constraintName="fk_unidad_raiz" referencedColumnNames="id" referencedTableName="organigrama"/>
    </changeSet>
	
	<changeSet author="Localidata" id="FK-UNIT-Of">
        <addForeignKeyConstraint baseColumnNames="unit_of" baseTableName="organigrama" constraintName="fk_unit_of"  referencedColumnNames="id" referencedTableName="organigrama"/>
    </changeSet>
	
	<!-- Callejero -->
	   <changeSet author="Localidata" id="FK-Index-table-callejero_tramo_via-via">
        <addForeignKeyConstraint baseColumnNames="via" baseTableName="callejero_tramo_via" constraintName="callejero_tramo_via_ibfk_1" referencedColumnNames="id" referencedTableName="callejero_via"/>
    </changeSet>
    
     <changeSet author="Localidata" id="FK-Index-table-portal_via-via">
        <addForeignKeyConstraint baseColumnNames="via" baseTableName="callejero_portal" constraintName="callejero_portal_ibfk_1" referencedColumnNames="id" referencedTableName="callejero_via"/>
    </changeSet>
	
	<!-- Agenda municipal -->
	<changeSet author="Localidata" id="FK-documento-to-evento">
        <addForeignKeyConstraint baseColumnNames="event_id" baseTableName="agenda_m_document" constraintName="fk_documento_to_evento"  referencedColumnNames="id" referencedTableName="agenda_m_evento"/>
    </changeSet>
	
	<changeSet author="Localidata" id="FK-rolEvento-to-evento">
        <addForeignKeyConstraint baseColumnNames="event_id" baseTableName="agenda_m_rolintegranteevento" constraintName="fk_rol_i_evento_to_evento"  referencedColumnNames="id" referencedTableName="agenda_m_evento"/>
    </changeSet>
	
	<changeSet author="Localidata" id="FK-eveto-to-evento">
        <addForeignKeyConstraint baseColumnNames="super_event_id" baseTableName="agenda_m_evento" constraintName="fk_evento_to_evento_super"  referencedColumnNames="id" referencedTableName="agenda_m_evento"/>
    </changeSet>
	
	
	<!-- Contratos -->
	 
	 <changeSet author="Localidata" id="fk-con-33">
        <addForeignKeyConstraint baseColumnNames="is_supplier_for" baseTableName="contratos_award" constraintName="contratos_award_ibfk_1" 
		referencedColumnNames="id" 	referencedTableName="contratos_organization"/>
     </changeSet>
	 <changeSet author="Localidata" id="fk-con-34">
        <addForeignKeyConstraint baseColumnNames="tender_id" baseTableName="contratos_lot" constraintName="contratos_lot_ibfk_1" referencedColumnNames="id" referencedTableName="contratos_tender"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-con-35">
        <addForeignKeyConstraint baseColumnNames="has_supplier" baseTableName="contratos_lot" constraintName="contratos_lot_ibfk_2" referencedColumnNames="id" referencedTableName="contratos_award"/>
    </changeSet>
    
    <changeSet author="Localidata" id="fk-con-36">
        <addForeignKeyConstraint baseColumnNames="lot_id" baseTableName="contratos_lot_rel_item" constraintName="contratos_lot_rel_item_ibfk_1" referencedColumnNames="id" referencedTableName="contratos_lot"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-con-37">
        <addForeignKeyConstraint baseColumnNames="item_id" baseTableName="contratos_lot_rel_item" constraintName="contratos_lot_rel_item_ibfk_2" referencedColumnNames="id" referencedTableName="contratos_item"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-con-38">
        <addForeignKeyConstraint baseColumnNames="has_tender" baseTableName="contratos_process" constraintName="contratos_process_ibfk_1" referencedColumnNames="id" referencedTableName="contratos_tender"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-con-39">
        <addForeignKeyConstraint baseColumnNames="is_buyer_for" baseTableName="contratos_process" constraintName="contratos_process_ibfk_2" referencedColumnNames="id" referencedTableName="contratos_organization"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-con-40">
        <addForeignKeyConstraint baseColumnNames="has_supplier" baseTableName="contratos_tender" constraintName="contratos_tender_ibfk_1" referencedColumnNames="id" referencedTableName="contratos_award"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-con-41">
        <addForeignKeyConstraint baseColumnNames="tender_id" baseTableName="contratos_tender_rel_item" constraintName="cont_tender_r_item_ibfk_1" referencedColumnNames="id" referencedTableName="contratos_tender"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-con-42">
        <addForeignKeyConstraint baseColumnNames="item_id" baseTableName="contratos_tender_rel_item" constraintName="cont_tender_r_item_ibfk_2" referencedColumnNames="id" referencedTableName="contratos_item"/>
    </changeSet>
	
	<!-- DSD -->
	<changeSet author="Localidata" id="DSD_Tables-20">
        <addForeignKeyConstraint baseColumnNames="cube_key" baseTableName="cube_dsd_rel_dimension" constraintName="cube_dsd_rel_dim_ibfk_1" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="cube_dsd"/>
    </changeSet>
    <changeSet author="Localidata" id="DSD_Tables-21">
        <addForeignKeyConstraint baseColumnNames="cube_key" baseTableName="cube_dsd_rel_measure" constraintName="cube_dsd_rel_mea_ibfk_1" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="cube_dsd"/>
    </changeSet>
    <changeSet author="Localidata" id="DSD_Tables-22">
        <addForeignKeyConstraint baseColumnNames="measure_key" baseTableName="cube_dsd_rel_measure" constraintName="cube_dsd_rel_mea_ibfk_2" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="cube_dsd_measure"/>
    </changeSet>
    <changeSet author="Localidata" id="DSD_Tables-23">
        <addForeignKeyConstraint baseColumnNames="dimension_key" baseTableName="cube_dsd_dimension_value" constraintName="dsd_dim_value_ibfk_1" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="cube_dsd_dimension"/>
    </changeSet>
    <changeSet author="Localidata" id="DSD_Tables-24">
        <addForeignKeyConstraint baseColumnNames="dimension_key" baseTableName="cube_dsd_rel_dimension" constraintName="dsd_rel_dim_ibfk_2" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="cube_dsd_dimension"/>
    </changeSet>
	
	<!-- Territorio -->
	<changeSet author="Localidata" id="TablasTerritorio-42">
        <addForeignKeyConstraint baseColumnNames="pais" baseTableName="territorio_autonomia" constraintName="t_autonomia_ibfk_1" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_pais"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-43">
        <addForeignKeyConstraint baseColumnNames="pais" baseTableName="territorio_barrio" constraintName="t_barrio_ibfk_1" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_pais"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-44">
        <addForeignKeyConstraint baseColumnNames="autonomia" baseTableName="territorio_barrio" constraintName="t_barrio_ibfk_2" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_autonomia"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-45">
        <addForeignKeyConstraint baseColumnNames="provincia" baseTableName="territorio_barrio" constraintName="t_barrio_ibfk_3" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_provincia"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-46">
        <addForeignKeyConstraint baseColumnNames="municipio" baseTableName="territorio_barrio" constraintName="t_barrio_ibfk_4" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_municipio"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-47">
        <addForeignKeyConstraint baseColumnNames="distrito" baseTableName="territorio_barrio" constraintName="t_barrio_ibfk_5" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_distrito"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-48">
        <addForeignKeyConstraint baseColumnNames="pais" baseTableName="territorio_distrito" constraintName="t_distrito_ibfk_1" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_pais"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-49">
        <addForeignKeyConstraint baseColumnNames="autonomia" baseTableName="territorio_distrito" constraintName="t_distrito_ibfk_2" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_autonomia"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-50">
        <addForeignKeyConstraint baseColumnNames="provincia" baseTableName="territorio_distrito" constraintName="t_distrito_ibfk_3" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_provincia"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-51">
        <addForeignKeyConstraint baseColumnNames="municipio" baseTableName="territorio_distrito" constraintName="t_distrito_ibfk_4" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_municipio"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-52">
        <addForeignKeyConstraint baseColumnNames="pais" baseTableName="territorio_municipio" constraintName="t_municipio_ibfk_1" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_pais"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-53">
        <addForeignKeyConstraint baseColumnNames="autonomia" baseTableName="territorio_municipio" constraintName="t_municipio_ibfk_2" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_autonomia"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-54">
        <addForeignKeyConstraint baseColumnNames="provincia" baseTableName="territorio_municipio" constraintName="t_municipio_ibfk_3" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_provincia"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-55">
        <addForeignKeyConstraint baseColumnNames="pais" baseTableName="territorio_provincia" constraintName="t_provincia_ibfk_1" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_pais"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-56">
        <addForeignKeyConstraint baseColumnNames="autonomia" baseTableName="territorio_provincia" constraintName="t_provincia_ibfk_2" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_autonomia"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-57">
        <addForeignKeyConstraint baseColumnNames="pais" baseTableName="territorio_seccion" constraintName="t_seccion_ibfk_1" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_pais"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-58">
        <addForeignKeyConstraint baseColumnNames="autonomia" baseTableName="territorio_seccion" constraintName="t_seccion_ibfk_2" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_autonomia"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-59">
        <addForeignKeyConstraint baseColumnNames="provincia" baseTableName="territorio_seccion" constraintName="t_seccion_ibfk_3" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_provincia"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-60">
        <addForeignKeyConstraint baseColumnNames="municipio" baseTableName="territorio_seccion" constraintName="t_seccion_ibfk_4" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_municipio"/>
    </changeSet>
    <changeSet author="Localidata" id="TablasTerritorio-61">
        <addForeignKeyConstraint baseColumnNames="distrito" baseTableName="territorio_seccion" constraintName="t_seccion_ibfk_5" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="ikey" referencedTableName="territorio_distrito"/>
    </changeSet>
	
	<!-- Bicicleta Pública -->
	 
	 <changeSet author="Localidata" id="fk-bicicleta-01">
        <addForeignKeyConstraint baseColumnNames="estacion_bicicleta_id" baseTableName="bici_anclaje" constraintName="bibileta_anclaje_ibfk_1" 
		referencedColumnNames="id" 	referencedTableName="bici_estacion"/>
     </changeSet>
	 <changeSet author="Localidata" id="fk-bicicleta-02">
        <addForeignKeyConstraint baseColumnNames="usuario_id" baseTableName="bici_trayecto" constraintName="bicicleta_trayecto_ibfk_1" 
		referencedColumnNames="id" 	referencedTableName="bici_usuario"/>
     </changeSet>
	 <changeSet author="Localidata" id="fk-bicicleta-03">
        <addForeignKeyConstraint baseColumnNames="bicicleta_id" baseTableName="bici_trayecto" constraintName="bicicleta_trayecto_ibfk_2" 
		referencedColumnNames="id" 	referencedTableName="bici_bicicleta"/>
     </changeSet>
	 <changeSet author="Localidata" id="fk-bicicleta-04">
        <addForeignKeyConstraint baseColumnNames="estacion_bicicleta_origen_id" baseTableName="bici_trayecto" constraintName="bicicleta_trayecto_ibfk_3" 
		referencedColumnNames="id" 	referencedTableName="bici_estacion"/>
     </changeSet>
	 <changeSet author="Localidata" id="fk-bicicleta-05">
        <addForeignKeyConstraint baseColumnNames="estacion_bicicleta_destino_id" baseTableName="bici_trayecto" constraintName="bicicleta_trayecto_ibfk_4" 
		referencedColumnNames="id" 	referencedTableName="bici_estacion"/>
     </changeSet>
	 <changeSet author="Localidata" id="fk-bicicleta-06">
        <addForeignKeyConstraint baseColumnNames="anclaje_origen_id" baseTableName="bici_trayecto" constraintName="bicicleta_trayecto_ibfk_5" 
		referencedColumnNames="id" 	referencedTableName="bici_anclaje"/>
     </changeSet>
	 <changeSet author="Localidata" id="fk-bicicleta-07">
        <addForeignKeyConstraint baseColumnNames="anclaje_destino_id" baseTableName="bici_trayecto" constraintName="bicicleta_trayecto_ibfk_6" 
		referencedColumnNames="id" 	referencedTableName="bici_anclaje"/>
     </changeSet>
	<changeSet author="Localidata" id="fk-bicicleta-08">
        <addForeignKeyConstraint baseColumnNames="trayecto_id" baseTableName="bici_punto_paso" constraintName="bicicleta_punto_de_paso_ibfk_1" 
		referencedColumnNames="id" 	referencedTableName="bici_trayecto"/>
     </changeSet>
	<changeSet author="Localidata" id="fk-bicicleta-09">
        <addForeignKeyConstraint baseColumnNames="made_by_sensor" baseTableName="bici_observacion" constraintName="bicicleta_observacion_ibfk_1" 
		referencedColumnNames="id" 	referencedTableName="bici_estacion"/>
     </changeSet>
	 
  	 <!-- FK CONVENIOS -->
	<changeSet author="Localidata" id="fk-convenio-1">
        <addForeignKeyConstraint baseColumnNames="convenio_id" baseTableName="convenio_documentacion" constraintName="fk_convenio_doc_id" 
		referencedColumnNames="id" referencedTableName="convenio"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-convenio-2">
        <addForeignKeyConstraint baseColumnNames="es_variacion_id" baseTableName="convenio" constraintName="fk_convenio_prorroga" 
		referencedColumnNames="id" referencedTableName="convenio"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-convenio-3">
        <addForeignKeyConstraint baseColumnNames="convenio_id" baseTableName="convenio_susc_entidad" constraintName="fk_convenio_susc_entidad_id" 
		referencedColumnNames="id" referencedTableName="convenio"/>
    </changeSet>
	<changeSet author="Localidata" id="fk-convenio-4">
        <addForeignKeyConstraint baseColumnNames="organization_id" baseTableName="convenio_susc_entidad" constraintName="fk_convenio_susc_org_id" 
		referencedColumnNames="id" referencedTableName="convenio_organization"/>
    </changeSet>
	<changeSet author="Localidata" id="fk-convenio-5">
        <addForeignKeyConstraint baseColumnNames="convenio_id" baseTableName="conv_rel_firmante_ayto" constraintName="fk_con_rel_firma_ayto_id" 
		referencedColumnNames="id" referencedTableName="convenio"/>
    </changeSet>
	
	<changeSet author="Localidata" id="fk-convenio-6">
        <addForeignKeyConstraint baseColumnNames="organization_id" baseTableName="conv_rel_firmante_ayto" constraintName="fk_con_rel_firma_ayto_org" 
		referencedColumnNames="id" referencedTableName="convenio_organization"/>
    </changeSet>
	
    <changeSet author="Localidata" id="fk-convenio-7">
        <addForeignKeyConstraint baseColumnNames="entidad_id" baseTableName="conv_rel_firmante_entidad" constraintName="fk_con_rel_firma_ent_id" 
		referencedColumnNames="id" referencedTableName="convenio_susc_entidad"/>
    </changeSet>
	<changeSet author="Localidata" id="fk-convenio-8">
        <addForeignKeyConstraint baseColumnNames="organization_id" baseTableName="conv_rel_firmante_entidad" constraintName="fk_con_rel_firma_ent_org" 
		referencedColumnNames="id" referencedTableName="convenio_organization"/>
    </changeSet>
	
	<changeSet author="Localidata" id="fk-convenio-9">
        <addForeignKeyConstraint baseColumnNames="organization_id" baseTableName="convenio" constraintName="fk_convenio_org" 
		referencedColumnNames="id" referencedTableName="convenio_organization"/>
    </changeSet>
	
	<changeSet author="Localidata" id="fk-convenio-10">
        <addForeignKeyConstraint baseColumnNames="org_id_obligado_presta" baseTableName="convenio" constraintName="fk_convenio_org_obliga" 
		referencedColumnNames="id" referencedTableName="convenio_organization"/>
    </changeSet>
	
    <!-- FK PRESUPUESTOS -->
	<changeSet author="Localidata" id="fk-presupuesto-1">
        <addForeignKeyConstraint baseColumnNames="liquidacion" baseTableName="presupuesto" constraintName="presupuesto_liquidacion_ibfk_1" referencedColumnNames="id" referencedTableName="presupuesto_liquidacion"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-presupuesto-2">
        <addForeignKeyConstraint baseColumnNames="presupuesto" baseTableName="presupuesto_gasto" constraintName="presupuesto_gasto_ibfk_1" referencedColumnNames="id" referencedTableName="presupuesto"/>
    </changeSet>
	<changeSet author="Localidata" id="fk-presupuesto-3">
        <addForeignKeyConstraint baseColumnNames="presupuesto" baseTableName="presupuesto_ingreso" constraintName="presupuesto_ingreso_ibfk_1" referencedColumnNames="id" referencedTableName="presupuesto"/>
    </changeSet>
	<changeSet author="Localidata" id="fk-presupuesto-4">
        <addForeignKeyConstraint baseColumnNames="presupuesto_gasto" baseTableName="presupuesto_ejecucion_gasto" constraintName="pres_ejecucion_gasto_ibfk_1" referencedColumnNames="id" referencedTableName="presupuesto_gasto"/>
    </changeSet>
	<changeSet author="Localidata" id="fk-presupuesto-5">
        <addForeignKeyConstraint baseColumnNames="presupuesto_ingreso" baseTableName="presupuesto_ejecucion_ingreso" constraintName="pres_ejecucion_ingreso_ibfk_1" referencedColumnNames="id" referencedTableName="presupuesto_ingreso"/>
    </changeSet>
    
    <!-- FK TRAFICO -->
	<changeSet author="Localidata" id="fk-trafico-1">
        <addForeignKeyConstraint baseColumnNames="monitorea" baseTableName="trafico_dispositivo_medicion" constraintName="traf_disp_medicion_ibfk_1" referencedColumnNames="id" referencedTableName="trafico_tramo"/>
    </changeSet>
	<changeSet author="Localidata" id="fk-trafico-2">
        <addForeignKeyConstraint baseColumnNames="incidencia_tramo" baseTableName="trafico_incidencia" constraintName="trafico_incidencia_ibfk_1" referencedColumnNames="id" referencedTableName="trafico_tramo"/>
    </changeSet>
	<changeSet author="Localidata" id="fk-trafico-3">
        <addForeignKeyConstraint baseColumnNames="has_feature_interest" baseTableName="trafico_observacion" constraintName="trafico_observacion_ibfk_1" referencedColumnNames="id" referencedTableName="trafico_tramo"/>
    </changeSet>
	<changeSet author="Localidata" id="fk-trafico-4">
        <addForeignKeyConstraint baseColumnNames="id_observacion" baseTableName="trafico_observacion_disp" constraintName="traf_obse_dispostivo_ibfk_1" referencedColumnNames="id" referencedTableName="trafico_observacion"/>
    </changeSet>
	<changeSet author="Localidata" id="fk-trafico-5">
        <addForeignKeyConstraint baseColumnNames="made_by_sensor" baseTableName="trafico_observacion_disp" constraintName="traf_obse_dispostivo_ibfk_2" referencedColumnNames="id" referencedTableName="trafico_dispositivo_medicion"/>
    </changeSet>
	<changeSet author="Localidata" id="fk-trafico-6">
        <addForeignKeyConstraint baseColumnNames="id_tramo" baseTableName="trafico_tramo_via" constraintName="trafico_tramo_via_ibfk_1" referencedColumnNames="id" referencedTableName="trafico_tramo"/>
    </changeSet>
	
	<!-- FK CONTAMINACION ACUSTICA -->
	<changeSet author="Localidata" id="fk-cont_acustica-1">
        <addForeignKeyConstraint baseColumnNames="observes" baseTableName="cont_acus_estacion_medida" constraintName="cont_acustica_ibfk_1" referencedColumnNames="id" referencedTableName="cont_acus_propiedad"/>
    </changeSet>
	<changeSet author="Localidata" id="fk-cont_acustica-2">
        <addForeignKeyConstraint baseColumnNames="made_by_sensor" baseTableName="cont_acus_observacion" constraintName="cont_acustica_ibfk_2" referencedColumnNames="id" referencedTableName="cont_acus_estacion_medida"/>
    </changeSet>
	<changeSet author="Localidata" id="fk-cont_acustica-3">
        <addForeignKeyConstraint baseColumnNames="observed_property" baseTableName="cont_acus_observacion" constraintName="cont_acustica_ibfk_3" referencedColumnNames="id" referencedTableName="cont_acus_propiedad"/>
    </changeSet>
	
	<!-- FK AUTOBUS -->
	<changeSet author="Localidata" id="fk-bus-1">
        <addForeignKeyConstraint baseColumnNames="specifying" baseTableName="bus_daytypeassignment" constraintName="bus_daytypassi_ibfk_1" referencedColumnNames="id" referencedTableName="bus_daytype"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-2">
        <addForeignKeyConstraint baseColumnNames="for_the_definition_of" baseTableName="bus_daytypeassignment" constraintName="bus_daytypeassi_ibfk_2" referencedColumnNames="id" referencedTableName="bus_servicecalendar"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-3">
        <addForeignKeyConstraint baseColumnNames="determined_by" baseTableName="bus_headwayjourneygroup" constraintName="bus_headjourgrou_ibfk_1" referencedColumnNames="id" referencedTableName="bus_headwayinterval"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-4">
        <addForeignKeyConstraint baseColumnNames="on_id" baseTableName="bus_journeypattern" constraintName="bus_jourpatt_ibfk_1" referencedColumnNames="id" referencedTableName="bus_route"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-5">
        <addForeignKeyConstraint baseColumnNames="generado_por_incidencia" baseTableName="bus_journeypattern" constraintName="bus_jourpatt_ibfk_2" referencedColumnNames="id" referencedTableName="bus_incidencia"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-6">
        <addForeignKeyConstraint baseColumnNames="operating" baseTableName="bus_linea" constraintName="bus_linea_ibfk_1" referencedColumnNames="id" referencedTableName="bus_operator"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-7">
        <addForeignKeyConstraint baseColumnNames="cabecera_linea" baseTableName="bus_linea" constraintName="bus_linea_ibfk_2" referencedColumnNames="id" referencedTableName="bus_parada"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-8">
        <addForeignKeyConstraint baseColumnNames="final_linea" baseTableName="bus_linea" constraintName="bus_linea_ibfk_3" referencedColumnNames="id" referencedTableName="bus_parada"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-9">
        <addForeignKeyConstraint baseColumnNames="in_id" baseTableName="bus_pointonroute" constraintName="bus_poinonrout_ibfk_1" referencedColumnNames="id" referencedTableName="bus_route"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-10">
        <addForeignKeyConstraint baseColumnNames="functional_centroid_for" baseTableName="bus_pointonroute" constraintName="bus_poinonrout_ibfk_2" referencedColumnNames="id" referencedTableName="bus_parada"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-11">
        <addForeignKeyConstraint baseColumnNames="has_feature_of_interest" baseTableName="bus_realtime_passing_time" constraintName="bus_realpasstime_ibfk_1" referencedColumnNames="id" referencedTableName="bus_pointonroute"/></changeSet>
    <changeSet author="Localidata" id="fk-bus-13">
        <addForeignKeyConstraint baseColumnNames="afectada_incidencia" baseTableName="bus_rel_linea_incidencia" constraintName="bus_rel_line_inci_ibfk_2" referencedColumnNames="id" referencedTableName="bus_incidencia"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-14">
        <addForeignKeyConstraint baseColumnNames="on_id" baseTableName="bus_route" constraintName="bus_route_ibfk_1" referencedColumnNames="id" referencedTableName="bus_linea"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-15">
        <addForeignKeyConstraint baseColumnNames="in_id" baseTableName="bus_stoppointinjourneypattern" constraintName="bus_stoppoinjourpatt_ibfk_1" referencedColumnNames="id" referencedTableName="bus_journeypattern"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-16">
        <addForeignKeyConstraint baseColumnNames="functional_centroid_for" baseTableName="bus_scheduled_stop_point" constraintName="bus_stoppoinjourpatt_ibfk_2" referencedColumnNames="id" referencedTableName="bus_parada"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-17">
        <addForeignKeyConstraint baseColumnNames="made_using" baseTableName="bus_vehiclejourney" constraintName="bus_vehijour_ibfk_1" referencedColumnNames="id" referencedTableName="bus_journeypattern"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-18">
        <addForeignKeyConstraint baseColumnNames="worked_on" baseTableName="bus_vehiclejourney" constraintName="bus_vehijour_ibfk_2" referencedColumnNames="id" referencedTableName="bus_daytype"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-19">
        <addForeignKeyConstraint baseColumnNames="composed_of" baseTableName="bus_vehiclejourney" constraintName="bus_vehijour_ibfk_3" referencedColumnNames="id" referencedTableName="bus_headwayjourneygroup"/>
    </changeSet>
    <changeSet author="Localidata" id="fk-bus-20">
        <addForeignKeyConstraint baseColumnNames="serving_pt_for" baseTableName="bus_operator" constraintName="bus_ope_ibfk_1" referencedColumnNames="id" referencedTableName="bus_authority"/>
    </changeSet>
	  <changeSet author="Localidata" id="fk-bus-21">
        <addForeignKeyConstraint baseColumnNames="viewed_as" baseTableName="bus_stoppointinjourneypattern" constraintName="bus_route_p_ibfk_1" referencedColumnNames="id" referencedTableName="bus_scheduled_stop_point"/>
    </changeSet>
	
	
	<!-- FK EMPLEO -->
	
	<changeSet author="Localidata" id="table-empleo-fk1">
        <addForeignKeyConstraint baseColumnNames="boletin_oficial_id" baseTableName="empleo_oferta_publica" constraintName="empleo_oferta_publica_ibfk_1"  referencedColumnNames="id" referencedTableName="empleo_boletin_oficial"/>
    </changeSet>
    <changeSet author="Localidata" id="table-empleo-fk2">
        <addForeignKeyConstraint baseColumnNames="convocatoria_id" baseTableName="empleo_plaza_turno" constraintName="empleo_plaza_turno_ibfk_1"  referencedColumnNames="id" referencedTableName="empleo_convocatoria_publica"/>
    </changeSet>
    <changeSet author="Localidata" id="table-empleo-fk3">
        <addForeignKeyConstraint baseColumnNames="boletin_id" baseTableName="empleo_rel_boletin_convoca" constraintName="empleo_rel_bole_conv_ibfk_1"  referencedColumnNames="id" referencedTableName="empleo_boletin_oficial"/>
    </changeSet>
    <changeSet author="Localidata" id="table-empleo-fk4">
        <addForeignKeyConstraint baseColumnNames="convocatoria_id" baseTableName="empleo_rel_boletin_convoca" constraintName="empleo_rel_bole_conv_ibfk_2"  referencedColumnNames="id" referencedTableName="empleo_convocatoria_publica"/>
    </changeSet>
    <changeSet author="Localidata" id="table-empleo-fk5">
        <addForeignKeyConstraint baseColumnNames="oferta_id" baseTableName="empleo_rel_oferta_convoca" constraintName="empleo_rel_ofer_conv_ibfk_1" referencedColumnNames="id" referencedTableName="empleo_oferta_publica"/>
    </changeSet>
    <changeSet author="Localidata" id="table-empleo-fk6">
        <addForeignKeyConstraint baseColumnNames="convocatoria_id" baseTableName="empleo_rel_oferta_convoca" constraintName="empleo_rel_ofer_conv_ibfk_2" referencedColumnNames="id" referencedTableName="empleo_convocatoria_publica"/>
    </changeSet>
	
	<!-- FK AMPLIACION SUBVENCIONES-->
	<!--
	<changeSet author="Localidata" id="table-amp-subvencion-fk1">
        <addForeignKeyConstraint baseColumnNames="tiene_beneficiario" baseTableName="subvencion_beneficiario" constraintName="subvencion_beneficiario_ibfk_1"  referencedColumnNames="id" referencedTableName="subvencion_organization"/>
    </changeSet>
	<changeSet author="Localidata" id="table-amp-subvencion-fk2">
        <addForeignKeyConstraint baseColumnNames="tiene_subvencion" baseTableName="subvencion_beneficiario" constraintName="subvencion_beneficiario_ibfk_2"  referencedColumnNames="id" referencedTableName="subvencion"/>
    </changeSet>
	<changeSet author="Localidata" id="table-amp-subvencion-fk3">
        <addForeignKeyConstraint baseColumnNames="area_id" baseTableName="subvencion" constraintName="subvencion_ibfk_1"  referencedColumnNames="id" referencedTableName="subvencion_organization"/>
    </changeSet>
	<changeSet author="Localidata" id="table-amp-subvencion-fk4">
        <addForeignKeyConstraint baseColumnNames="entidad_financiadora_id" baseTableName="subvencion" constraintName="subvencion_ibfk_2"  referencedColumnNames="id" referencedTableName="subvencion_organization"/>
    </changeSet>
	<changeSet author="Localidata" id="table-amp-subvencion-fk5">
        <addForeignKeyConstraint baseColumnNames="servicio_id" baseTableName="subvencion" constraintName="subvencion_ibfk_3"  referencedColumnNames="id" referencedTableName="subvencion_organization"/>
    </changeSet>
	<changeSet author="Localidata" id="table-amp-subvencion-fk6">
        <addForeignKeyConstraint baseColumnNames="organization_id" baseTableName="subvencion" constraintName="subvencion_ibfk_5"  referencedColumnNames="id" referencedTableName="subvencion_organization"/>
    </changeSet>
	-->
	<!-- FK AMPLIACION SUBVENCIONES 28.01 -->
	
	
	<changeSet author="Localidata" id="table-amp-subvencion-fk1">
        <addForeignKeyConstraint baseColumnNames="beneficiario" baseTableName="subvencion_concesion" constraintName="subvencion_beneficiario_ibfk_1"  referencedColumnNames="id" referencedTableName="subvencion_organization"/>
    </changeSet>
	<changeSet author="Localidata" id="table-amp-subvencion-fk2">
        <addForeignKeyConstraint baseColumnNames="convocatoria" baseTableName="subvencion_concesion" constraintName="subvencion_beneficiario_ibfk_2"  referencedColumnNames="id" referencedTableName="subvencion_convocatoria"/>
    </changeSet>
	<changeSet author="Localidata" id="table-amp-subvencion-fk3">
        <addForeignKeyConstraint baseColumnNames="area_id" baseTableName="subvencion_convocatoria" constraintName="subvencion_ibfk_1"  referencedColumnNames="id" referencedTableName="subvencion_organization"/>
    </changeSet>
	<changeSet author="Localidata" id="table-amp-subvencion-fk4">
        <addForeignKeyConstraint baseColumnNames="entidad_financiadora_id" baseTableName="subvencion_convocatoria" constraintName="subvencion_ibfk_2"  referencedColumnNames="id" referencedTableName="subvencion_organization"/>
    </changeSet>
	<changeSet author="Localidata" id="table-amp-subvencion-fk5">
        <addForeignKeyConstraint baseColumnNames="servicio_id" baseTableName="subvencion_convocatoria" constraintName="subvencion_ibfk_3"  referencedColumnNames="id" referencedTableName="subvencion_organization"/>
    </changeSet>
	<changeSet author="Localidata" id="table-amp-subvencion-fk6">
        <addForeignKeyConstraint baseColumnNames="organization_id" baseTableName="subvencion_convocatoria" constraintName="subvencion_ibfk_5"  referencedColumnNames="id" referencedTableName="subvencion_organization"/>
    </changeSet>
	 
	 
	<!-- FK DEUDA COMERCIAL 1.29 -->
	
	<changeSet author="Localidata" id="table-deuda-comercial-fk1">
        <addForeignKeyConstraint baseColumnNames="entidad" baseTableName="deuda_c_inf_morosidad_tri" constraintName="deudac_morosidad_tri_ibfk_1"  referencedColumnNames="id" referencedTableName="deuda_organization"/>
    </changeSet>
	
	<changeSet author="Localidata" id="table-deuda-comercial-fk2">
        <addForeignKeyConstraint baseColumnNames="periodo" baseTableName="deuda_c_inf_morosidad_tri" constraintName="deudac_morosidad_tri_ibfk_2"  referencedColumnNames="id" referencedTableName="deuda_c_publica_interval"/>
    </changeSet>
	
	<changeSet author="Localidata" id="table-deuda-comercial-fk3">
        <addForeignKeyConstraint baseColumnNames="periodo" baseTableName="deuda_c_inf_pmp_mes_global" constraintName="deudac_inf_global_ibfk_3"  referencedColumnNames="id" referencedTableName="deuda_c_publica_interval"/>
    </changeSet>
	
	<changeSet author="Localidata" id="table-deuda-comercial-fk4">
        <addForeignKeyConstraint baseColumnNames="entidad" baseTableName="deuda_c_inf_pmp_mes" constraintName="deudac_inf_mes_ibfk_4"  referencedColumnNames="id" referencedTableName="deuda_organization"/>
    </changeSet>
	
	<changeSet author="Localidata" id="table-deuda-comercial-fk5">
        <addForeignKeyConstraint baseColumnNames="periodo" baseTableName="deuda_c_inf_pmp_mes" constraintName="deudac_inf_mes_ibfk_5"  referencedColumnNames="id" referencedTableName="deuda_c_publica_interval"/>
    </changeSet>
	
	<!-- FK DEUDA FINACIERA 1.30 -->

	<changeSet author="Localidata" id="table-deuda-financiera-fk1">
        <addForeignKeyConstraint baseColumnNames="deuda_anual" baseTableName="deuda_f_inst_financiacion" constraintName="deuda_f_inst_fin_ibfk_1"  referencedColumnNames="id" referencedTableName="deuda_f_anual"/>
    </changeSet>
	
	<changeSet author="Localidata" id="table-deuda-financiera-fk2">
        <addForeignKeyConstraint baseColumnNames="prestamo_id" baseTableName="deuda_f_rel_prestamo_entidad" constraintName="d_f_rel_prestamo_ent_ibfk_2"  referencedColumnNames="id" referencedTableName="deuda_f_prestamo"/>
    </changeSet>
	
	<changeSet author="Localidata" id="table-deuda-financiera-fk3">
        <addForeignKeyConstraint baseColumnNames="entidad_prestamista" baseTableName="deuda_f_rel_prestamo_entidad" constraintName="d_f_rel_prestamo_ent_ibfk_3"  referencedColumnNames="id" referencedTableName="deuda_organization"/>
    </changeSet>
	
	<changeSet author="Localidata" id="table-deuda-financiera-fk4">
        <addForeignKeyConstraint baseColumnNames="instrumenta_financiacion" baseTableName="deuda_f_amortizacion" constraintName="deuda_f_amortizacion_ibfk_4"  referencedColumnNames="id" referencedTableName="deuda_f_inst_financiacion"/>
    </changeSet>
	
	<changeSet author="Localidata" id="table-deuda-financiera-fk5">
        <addForeignKeyConstraint baseColumnNames="instrumenta_financiacion" baseTableName="deuda_f_capital_vivo" constraintName="deuda_f_capital_vivo_ibfk_5"  referencedColumnNames="id" referencedTableName="deuda_f_inst_financiacion"/>
    </changeSet>
	
	<changeSet author="Localidata" id="table-deuda-financiera-fk6">
        <addForeignKeyConstraint baseColumnNames="instrumenta_financiacion" baseTableName="deuda_f_carga_financiera" constraintName="d_f_carga_financiera_ibfk_6"  referencedColumnNames="id" referencedTableName="deuda_f_inst_financiacion"/>
    </changeSet>
	
	<changeSet author="Localidata" id="table-deuda-financiera-fk7">
        <addForeignKeyConstraint baseColumnNames="prestamo" baseTableName="deuda_f_inst_financiacion" constraintName="d_f_inst_financiacion_ibfk_7"  referencedColumnNames="id" referencedTableName="deuda_f_prestamo"/>
    </changeSet>
	
	<changeSet author="Localidata" id="table-deuda-financiera-fk8">
        <addForeignKeyConstraint baseColumnNames="emision" baseTableName="deuda_f_inst_financiacion" constraintName="d_f_inst_financiacion_ibfk_8"  referencedColumnNames="id" referencedTableName="deuda_f_emision"/>
    </changeSet>
	
	
	 <!-- FK TRAFICO -->
	<changeSet author="Localidata" id="fk-trafico-7">
        <addForeignKeyConstraint baseColumnNames="observes" baseTableName="trafico_dispositivo_medicion" constraintName="traf_disp_medicion_ibfk_2" referencedColumnNames="id" referencedTableName="trafico_propiedad_medicion"/>
    </changeSet>
	
	<changeSet author="Localidata" id="fk-trafico-8">
        <addForeignKeyConstraint baseColumnNames="phenomenon_time" baseTableName="trafico_observacion" constraintName="trafico_observacion_ibfk_2" referencedColumnNames="id" referencedTableName="trafico_proper_interval"/>
    </changeSet>
	
</databaseChangeLog>